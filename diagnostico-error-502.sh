#!/bin/bash

echo "ğŸ” DIAGNÃ“STICO DEL ERROR 502 DE PRESTASHOP"
echo ""
echo "El error 502 (Bad Gateway) puede tener varias causas:"
echo ""
echo "1ï¸âƒ£  VERIFICAR QUE NETLIFY ESTÃ DESPLEGADO:"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "El proxy de Netlify debe estar desplegado para funcionar."
echo ""
echo "Si NO estÃ¡s usando Netlify, el proxy NO funcionarÃ¡."
echo "En ese caso, necesitas:"
echo ""
echo "  OpciÃ³n A: Desplegar en Netlify"
echo "    - AsegÃºrate de que netlify/functions/prestashop.js estÃ© desplegado"
echo "    - La funciÃ³n debe estar disponible en: /api/prestashop/*"
echo ""
echo "  OpciÃ³n B: Usar Supabase Edge Function (recomendado)"
echo "    - Crear una Edge Function similar en Supabase"
echo "    - Aprovecha que ya usas Supabase"
echo ""
echo "2ï¸âƒ£  PROBAR CONEXIÃ“N DIRECTA (sin proxy):"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "Ejecuta: node test-prestashop-import.js"
echo "Esto probarÃ¡ la conexiÃ³n directa con PrestaShop."
echo ""
echo "3ï¸âƒ£  VERIFICAR URL Y CREDENCIALES:"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "URL debe ser: https://100x100chef.com/shop"
echo "API Key: E5CUG6DLAD9EA46AIN7Z2LIX1W3IIJKZ"
echo ""
echo "4ï¸âƒ£  SOLUCIÃ“N RÃPIDA - DESPLEGAR EN SUPABASE:"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "Ya que usas Supabase, puedes crear una Edge Function"
echo "que haga lo mismo que el proxy de Netlify."
echo ""
echo "Â¿Quieres que cree una Edge Function en Supabase?"
echo "Esto serÃ­a mÃ¡s rÃ¡pido y no necesitarÃ­as Netlify."


